<!DOCTYPE html>
<html>
<head>
    <title>open_bus</title>
    <style>
        body {
            padding: 0;
            margin: 0;
            font-family: sans-serif;
        } 
        html, body {
            height: 100%;
            width: 100vw;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        #map {
            height: 95vh;
            width: 100vw;
        }
        #last-updated {
            padding-left: 1em;
        }
        .bus-icon {
            border: 2px solid black;
            border-radius: 50%;
            width: 2.5em;
            height: 2.5em;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .bus-immediate {
            border-color: green;
            animation-name: flash_border;
            animation-duration: 2s;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            -webkit-animation-name: flash_border;
            -webkit-animation-duration: 2s;
            -webkit-animation-timing-function: linear;
            -webkit-animation-iteration-count: infinite;
            -moz-animation-name: flash_border;
            -moz-animation-duration: 2s;
            -moz-animation-timing-function: linear;
            -moz-animation-iteration-count: infinite;
        }
        @keyframes flash_border {
            0% {
                border-color: green;
            }
            50% {
                border-color: blue;
            }
            100% {
                border-color: green;
            }
        }

        @-webkit-keyframes flash_border {
            0% {
                border-color: green;
            }
            50% {
                border-color: blue;
            }
            100% {
                border-color: green;
            }
        }

        @-moz-keyframes flash_border {
            0% {
                border-color: green;
            }
            50% {
                border-color: blue;
            }
            100% {
                border-color: green;
            }
        }
        
        .metro-stop {
            border: 2px solid black;
            position: relative;
            width: 2em;
            height: 2em;
            padding: 0.5em;
            padding-right: 0%;
            padding-top: 0%;
        }
        .metro-stop-inner {
            float: left;
            text-align: center;
        }
        .metro-stop-popup-ul {
            /* list-style-type: none; */
            padding-left: 1.5em;
        }
        .metro-stop-popup-ul li {
            margin-bottom: 0.5em;
        }
        .due {
            color: red;
        }
        .close {
            color: green;
        }
        .normal {
            color: orange;
        }
        .departed {
            color: grey;
        }
        .ms-left {
            background-color: aqua;
        }
        .ms-right {
            background-color: orange;
        }

    </style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-tag-filter-button@0.0.5/src/leaflet-tag-filter-button.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-tag-filter-button@0.0.5/src/leaflet-tag-filter-button.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol/dist/L.Control.Locate.min.js" charset="utf-8"></script>

</head>
<body>    
    <div id="map-container">
        <!-- Include the map.html file here -->
        <!-- BEGIN: /Users/kieran/Documents/tfwm-api-tests/site/_layouts/map.html -->
        {% include map.html %}
        <!-- END: /Users/kieran/Documents/tfwm-api-tests/site/_layouts/map.html -->
    </div>
    <p id="last-updated">Last updated: <span id="last-updated-date">{{ site.time | date: "%H:%M:%S - %d %B %Y" }}</span> - <span id="url"><a href="https://bus.kroper.uk/" id="url-a">bus.kroper.uk</a></span> - <a id="commit-sha" href="https://github.com/KRoperUK/open_bus/commit/">COMMIT_SHA</a></p>
</body>
</html>


<script>
    if (document.getElementById("commit-sha").innerText != "COMMIT_SHA") {
        document.getElementById("commit-sha").href = document.getElementById("commit-sha").href + document.getElementById("commit-sha").innerText
    }
</script>